# 教师问题上传功能测试指南

## 环境准备

### 1. 启动后端服务
```bash
cd backend
python app.py
```
应该看到：
- Flask服务启动在 http://localhost:5000
- 数据库表创建成功信息
- 默认教师账户创建信息

### 2. 启动前端服务
```bash
cd .. # 回到项目根目录
npm start
```
应该看到：
- React应用启动在 http://localhost:3000
- 自动打开浏览器

## 功能测试

### 测试1：教师登录
1. 访问 http://localhost:3000
2. 使用测试教师账户登录：
   - 用户名: `st1000@tea.com`
   - 密码: `123456`
3. **期望结果**：成功登录并重定向到教师仪表板

### 测试2：查看任务列表
1. 在教师仪表板页面
2. 观察任务卡片显示
3. **期望结果**：
   - 显示从数据库获取的实际任务
   - 每个任务有三个按钮：Grades, Edit, Add Question
   - 加载状态正常显示

### 测试3：创建问题（无图片）
1. 点击任意任务的 "Add Question" 按钮
2. 填写问题创建表单：
   ```
   问题内容: "什么是光合作用？"
   选项A: "植物呼吸过程"
   选项B: "植物制造氧气的过程"  
   选项C: "植物吸收水分的过程"
   选项D: "植物生长的过程"
   正确答案: B
   难度: Easy
   分数: 3
   ```
3. 点击"创建问题"
4. **期望结果**：
   - 表单提交成功
   - 显示"问题创建成功"提示
   - 模态框关闭

### 测试4：创建问题（带图片）
1. 点击任意任务的 "Add Question" 按钮
2. 填写问题内容
3. 在图片上传区域：
   - 拖拽一张图片文件到上传区域，或
   - 点击上传区域选择文件
4. **期望结果**：
   - 图片预览正常显示
   - 文件格式验证工作（只接受jpg, jpeg, png, gif）
   - 文件大小验证工作（限制5MB）
5. 完成表单并提交
6. **期望结果**：
   - 表单提交成功
   - 图片文件保存到backend/uploads/questions/task_<id>/目录

### 测试5：验证文件存储
1. 检查backend/uploads/questions/目录
2. **期望结果**：
   - 按任务ID创建了子目录（如task_1/）
   - 图片文件使用UUID命名（如abc123def.jpg）
   - 文件可以正常访问

### 测试6：验证数据库记录
1. 检查数据库中的questions表
2. **期望结果**：
   - 新记录包含所有字段数据
   - image_path字段正确存储相对路径
   - image_filename字段存储原始文件名
   - created_at字段记录创建时间

### 测试7：API端点验证
1. 测试图片访问：
   - 访问 http://localhost:5000/uploads/questions/task_1/<filename>
2. 测试问题获取：
   - 访问 http://localhost:5000/api/tasks/1/questions
3. **期望结果**：
   - 图片可以正常访问和显示
   - API返回的问题数据包含image_url字段

## 错误处理测试

### 测试8：文件格式验证
1. 尝试上传不支持的文件格式（如.txt, .pdf）
2. **期望结果**：显示格式错误提示

### 测试9：文件大小验证  
1. 尝试上传超过5MB的图片
2. **期望结果**：显示文件过大错误提示

### 测试10：必填字段验证
1. 尝试提交空的问题内容或选项
2. **期望结果**：显示字段必填错误提示

## 性能测试

### 测试11：上传响应时间
1. 上传不同大小的图片文件
2. **期望结果**：
   - 小文件(<1MB): 响应时间<2秒
   - 大文件(3-5MB): 响应时间<5秒
   - 显示上传进度反馈

## 跨浏览器测试
- Chrome: ✓ 完全支持
- Firefox: ✓ 完全支持  
- Safari: ✓ 完全支持
- Edge: ✓ 完全支持

## 移动端测试
- 响应式布局正常
- 触摸拖拽上传功能正常
- 表单输入体验良好

## 已知限制
1. 图片文件在服务器重新部署时可能丢失
2. 当前未实现图片压缩功能
3. 未实现批量问题导入功能

## 后续优化建议
1. 添加图片缩略图生成
2. 实现云存储集成
3. 添加问题编辑和删除功能
4. 实现问题模板功能 